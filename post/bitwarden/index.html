<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用bitwarden_rs搭建安全密码库服务器 | Xizi's Blog</title>
<meta name=keywords content="Bitwarden"><meta name=description content="bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器
https://bitwarden.com/ https://github.com/dani-garcia/bitwarden_rs https://hub.docker.com/r/bitwardenrs/server Docker安装 wget -qO- get.docker.com | bash 安装Docker Compose
curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` > ./docker-compose mv ./docker-compose /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Docker进程管理
systemctl enable docker systemctl start docker systemctl status docker 部署 Bitwarden https://github.com/dani-garcia/bitwarden_rs
&lsquo;bitwarden_rs&rsquo;的docker镜像bitwardenrs/server现已变更为vaultwarden/server
为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the &lsquo;bitwarden&rsquo; preset。
docker run --rm -it vaultwarden/server /vaultwarden hash 得到用bitwarden生成的ADMIN_TOKEN值。类似如下值
ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274' 复制替换掉ADMIN_TOKEN值
docker run -d --name bitwarden --restart=always -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN=`ADMIN_TOKEN值` vaultwarden/server:latest 以下参数可自定义按需修改："><meta name=author content="admin"><link rel=canonical href=https://567899.xyz/post/bitwarden/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.e47a4660efa4fbc78073593cfd9c5a39a49f0ad0d1d33adf13d7f5183b23c238.css integrity="sha256-5HpGYO+k+8eAc1k8/ZxaOaSfCtDR0zrfE9f1GDsjwjg=" rel="preload stylesheet" as=style><link rel=icon href=https://567899.xyz/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://567899.xyz/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://567899.xyz/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://567899.xyz/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://567899.xyz/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://567899.xyz/post/bitwarden/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="使用bitwarden_rs搭建安全密码库服务器"><meta property="og:description" content="bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器
https://bitwarden.com/ https://github.com/dani-garcia/bitwarden_rs https://hub.docker.com/r/bitwardenrs/server Docker安装 wget -qO- get.docker.com | bash 安装Docker Compose
curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` > ./docker-compose mv ./docker-compose /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Docker进程管理
systemctl enable docker systemctl start docker systemctl status docker 部署 Bitwarden https://github.com/dani-garcia/bitwarden_rs
&lsquo;bitwarden_rs&rsquo;的docker镜像bitwardenrs/server现已变更为vaultwarden/server
为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the &lsquo;bitwarden&rsquo; preset。
docker run --rm -it vaultwarden/server /vaultwarden hash 得到用bitwarden生成的ADMIN_TOKEN值。类似如下值
ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274' 复制替换掉ADMIN_TOKEN值
docker run -d --name bitwarden --restart=always -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN=`ADMIN_TOKEN值` vaultwarden/server:latest 以下参数可自定义按需修改："><meta property="og:type" content="article"><meta property="og:url" content="https://567899.xyz/post/bitwarden/"><meta property="og:image" content="https://567899.xyz/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-06-01T01:37:56+08:00"><meta property="article:modified_time" content="2018-06-01T01:37:56+08:00"><meta property="og:site_name" content="Xizi's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://567899.xyz/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="使用bitwarden_rs搭建安全密码库服务器"><meta name=twitter:description content="bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器
https://bitwarden.com/ https://github.com/dani-garcia/bitwarden_rs https://hub.docker.com/r/bitwardenrs/server Docker安装 wget -qO- get.docker.com | bash 安装Docker Compose
curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` > ./docker-compose mv ./docker-compose /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Docker进程管理
systemctl enable docker systemctl start docker systemctl status docker 部署 Bitwarden https://github.com/dani-garcia/bitwarden_rs
&lsquo;bitwarden_rs&rsquo;的docker镜像bitwardenrs/server现已变更为vaultwarden/server
为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the &lsquo;bitwarden&rsquo; preset。
docker run --rm -it vaultwarden/server /vaultwarden hash 得到用bitwarden生成的ADMIN_TOKEN值。类似如下值
ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274' 复制替换掉ADMIN_TOKEN值
docker run -d --name bitwarden --restart=always -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN=`ADMIN_TOKEN值` vaultwarden/server:latest 以下参数可自定义按需修改："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://567899.xyz/post/"},{"@type":"ListItem","position":2,"name":"使用bitwarden_rs搭建安全密码库服务器","item":"https://567899.xyz/post/bitwarden/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用bitwarden_rs搭建安全密码库服务器","name":"使用bitwarden_rs搭建安全密码库服务器","description":"bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器\nhttps://bitwarden.com/ https://github.com/dani-garcia/bitwarden_rs https://hub.docker.com/r/bitwardenrs/server Docker安装 wget -qO- get.docker.com | bash 安装Docker Compose\ncurl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` \u0026gt; ./docker-compose mv ./docker-compose /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Docker进程管理\nsystemctl enable docker systemctl start docker systemctl status docker 部署 Bitwarden https://github.com/dani-garcia/bitwarden_rs\n\u0026lsquo;bitwarden_rs\u0026rsquo;的docker镜像bitwardenrs/server现已变更为vaultwarden/server\n为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the \u0026lsquo;bitwarden\u0026rsquo; preset。\ndocker run --rm -it vaultwarden/server /vaultwarden hash 得到用bitwarden生成的ADMIN_TOKEN值。类似如下值\nADMIN_TOKEN=\u0026#39;$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274\u0026#39; 复制替换掉ADMIN_TOKEN值\ndocker run -d --name bitwarden --restart=always -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN=`ADMIN_TOKEN值` vaultwarden/server:latest 以下参数可自定义按需修改：","keywords":["Bitwarden"],"articleBody":"bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器\nhttps://bitwarden.com/ https://github.com/dani-garcia/bitwarden_rs https://hub.docker.com/r/bitwardenrs/server Docker安装 wget -qO- get.docker.com | bash 安装Docker Compose\ncurl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` \u003e ./docker-compose mv ./docker-compose /usr/bin/docker-compose chmod +x /usr/bin/docker-compose Docker进程管理\nsystemctl enable docker systemctl start docker systemctl status docker 部署 Bitwarden https://github.com/dani-garcia/bitwarden_rs\n‘bitwarden_rs’的docker镜像bitwardenrs/server现已变更为vaultwarden/server\n为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the ‘bitwarden’ preset。\ndocker run --rm -it vaultwarden/server /vaultwarden hash 得到用bitwarden生成的ADMIN_TOKEN值。类似如下值\nADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274' 复制替换掉ADMIN_TOKEN值\ndocker run -d --name bitwarden --restart=always -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN=`ADMIN_TOKEN值` vaultwarden/server:latest 以下参数可自定义按需修改：\nSIGNUP_ALLOWED值是否允许注册 INVITATIONS_ALLOWED值是否允许组织邀请注册 youpassword用户管理界面 (/admin)的密码 /bw-data/宿主机映射目录 将宿主机的45729映射到容器的80端口上 --restart=always自动启动bitwarden -e SHOW_PASSWORD_HINT=false禁用密码提示 禁用日志添加-e LOG_LEVEL=off、 -e USE_SYSLOG=false 、-e EXTENDED_LOGGING=false\ndocker run -d --name bitwarden --restart=always -e LOG_LEVEL=off -e USE_SYSLOG=false -e EXTENDED_LOGGING=false -e TZ=Asia/Shanghai -e SHOW_PASSWORD_HINT=false -v /bw-data/:/data/ -p 45729:80 -e SIGNUPS_ALLOWED=false -e INVITATIONS_ALLOWED=false -e ADMIN_TOKEN='$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwoMPsukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274' vaultwarden/server:latest bitwarden容器操作命令 启动容器\ndocker start bitwarden 停止容器\ndocker stop bitwarden 删除容器\ndocker rm bitwarden 升级 Bitwarden 镜像 docker stop bitwarden docker pull vaultwarden/server:latest docker start bitwarden 备份Bitwarden 以下为必须要备份的\n/bw-data/db.sqlite3是Bitwarden的数据库文件 /bw-data/sends/*目录下的所有附件是不加密的 docker restart bitwarden # 手动检查文件更新 # ls -l /bw-data/db.sqlite3 # rclone ls rclonename:bitwarden/db.sqlite3 rclone sync /bw-data/db.sqlite3 rclonename:bitwarden --update #rclone sync /bw-data/db.sqlite3 rclonename:bitwarden --ignore-times --size-only 其它的都可以不备份(可选)，例如/bw-data/config.json管理面板参数，把下面的内容保存为bitwarden_backup.sh\n/bw-data/db.sqlite3是Bitwarden 数据库文件 /root/bitwarden/db.sqlite3是本地复制过来的，用于上传到github或通过rclone上传，判断比对MD5值，只有当有更新才上传。\n#!/bin/bash # 重新启动 Bitwarden Docker 容器 docker restart bitwarden # 等待 Bitwarden 容器启动完成 sleep 3 # 获取 Bitwarden 数据库文件的 MD5 值 db_md5_before=$(md5sum /bw-data/db.sqlite3 | awk '{print $1}') # 再次获取 Bitwarden 数据库文件的 MD5 值 db_md5_after=$(md5sum /root/bitwarden/db.sqlite3 | awk '{print $1}') # 如果 MD5 值没有变化，则结束脚本 if [ \"$db_md5_before\" == \"$db_md5_after\" ]; then echo \"Bitwarden 数据库没有更新，脚本退出。\" exit 0 fi # cd /root/bitwarden/ rm /root/bitwarden/db.sqlite3 cp -f /bw-data/db.sqlite3 /root/bitwarden # 把备份压缩包文件通过github私有仓库 git add --all # 指定时间格式 DATE=$(TZ=Asia/Shanghai date +%Y-%m-%d_%H:%M:%S) git commit -m \"$DATE\" git push echo \"github push推送更新成功。\" # 下面是网盘备份 # 把db.sqlite3加密压缩 # 指定时间格式 DATE=$(TZ=Asia/Shanghai date +%Y%m%d%H%M%S) zip -P yourpassword -r /bw-data/tmp/bw-$DATE.zip /bw-data/db.sqlite3 /bw-data/sends # 把备份压缩包文件通过rclone上传到网盘 rclone copy /bw-data/tmp/*.zip rclonename:bitwarden # 删除15天前的备份文件 rclone delete rclonename:bitwarden --min-age 15d # 删除压缩包文件 rm /bw-data/tmp/*.zip echo \"删除压缩包文件\" # 提示用户更新完成 echo \"Bitwarden 数据库已经更新完毕。\" 然后授权\nchmod +x bitwarden_backup.sh 通过Crontab定时执行计划任务，编辑/etc/crontab文件，添加\n23 11 * * * root bash /root/bitwarden_backup.sh 然后重启Crontab\nsystemctl restart cron.service /etc/init.d/cron restart 还原Bitwarden的备份数据库、镜像备用站点 rclone sync rclonename:bitwarden/db.sqlite3 /bw-data --ignore-times --size-only docker restart bitwarden 解压、替换掉原来的文件即可，创建bitwarden_sync.sh文件，\n#!/bin/bash rm /root/bitwarden/db.sqlite3 # 例如从github恢复 cd /root/bitwarden \u0026\u0026 git pull # 或者从rclone恢复，二选一即可 rclone copy rclonename:bitwarden/db.sqlite3 /root/bitwarden # 获取 Bitwarden 数据库文件的 MD5 值 db_md5_before=$(md5sum /root/bitwarden/db.sqlite3 | awk '{print $1}') # 再次获取 Bitwarden 数据库文件的 MD5 值 db_md5_after=$(md5sum /bw-data/db.sqlite3 | awk '{print $1}') # 如果 MD5 值没有变化，则结束脚本 if [ \"$db_md5_before\" == \"$db_md5_after\" ]; then echo \"Bitwarden 数据库没有更新，脚本退出。\" exit 0 fi rm /bw-data/db.sqlite3 /bw-data/db.sqlite3-shm /bw-data/db.sqlite3-wal cp /root/bitwarden/db.sqlite3 /bw-data # 重新启动 Bitwarden Docker 容器 docker restart bitwarden # 等待 Bitwarden 容器启动完成 sleep 3 # 提示用户更新完成 echo \"Bitwarden 数据库已经更新完毕。\" nginx配置带SSL证书的站点配置文件示范 编辑/etc/nginx/sites-available/example.com站点配置文件\nserver { listen 443 ssl http2; listen [::]:443 ssl http2; server_name example.com; # root /var/www/example.com; # index index.html index.htm index.php; location / { proxy_pass http://127.0.0.1:45729; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } ssl on; ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; } 客户端使用 https://bitwarden.com/download/\nDesktop Windows Support for Windows 7, 8, and 10\nmacOS Support for macOS Yosemite and later\nLinux\nSupport for most distributions\nWeb Browser Google Chrome Mozilla Firefox Opera Microsoft Edge Safari Vivaldi Brave Tor Browser Mobile App Store Google Play ","wordCount":"502","inLanguage":"zh","image":"https://567899.xyz/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2018-06-01T01:37:56+08:00","dateModified":"2018-06-01T01:37:56+08:00","author":{"@type":"Person","name":"admin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://567899.xyz/post/bitwarden/"},"publisher":{"@type":"Organization","name":"Xizi's Blog","logo":{"@type":"ImageObject","url":"https://567899.xyz/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://567899.xyz/ accesskey=h title="Xizi's Blog (Alt + H)"><img src=https://567899.xyz/apple-touch-icon.png alt aria-label=logo height=35>Xizi's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://567899.xyz/archives/ title=归档><span>归档</span></a></li><li><a href=https://567899.xyz/tags/ title=标签><span>标签</span></a></li><li><a href=https://567899.xyz/about/ title=关于><span>关于</span></a></li><li><a href=https://567899.xyz/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://567899.xyz/>主页</a>&nbsp;»&nbsp;<a href=https://567899.xyz/post/>Posts</a></div><h1 class="post-title entry-hint-parent">使用bitwarden_rs搭建安全密码库服务器</h1><div class=post-meta><span title='2018-06-01 01:37:56 +0800 +0800'>六月 1, 2018</span>&nbsp;·&nbsp;admin&nbsp;|&nbsp;<a href=https://github.com/pwwq/hugo-code/tree/master/content/post/bitwarden.md rel="noopener noreferrer" target=_blank>编辑</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>使用bitwarden_rs搭建安全密码库服务器</div></summary><div class=inner><ul><li><a href=#docker%e5%ae%89%e8%a3%85 aria-label=Docker安装>Docker安装</a></li><li><a href=#%e9%83%a8%e7%bd%b2-bitwarden aria-label="部署 Bitwarden">部署 Bitwarden</a></li><li><a href=#bitwarden%e5%ae%b9%e5%99%a8%e6%93%8d%e4%bd%9c%e5%91%bd%e4%bb%a4 aria-label=bitwarden容器操作命令>bitwarden容器操作命令</a></li><li><a href=#%e5%8d%87%e7%ba%a7-bitwarden-%e9%95%9c%e5%83%8f aria-label="升级 Bitwarden 镜像">升级 Bitwarden 镜像</a></li><li><a href=#%e5%a4%87%e4%bb%bdbitwarden aria-label=备份Bitwarden>备份Bitwarden</a></li><li><a href=#%e8%bf%98%e5%8e%9fbitwarden%e7%9a%84%e5%a4%87%e4%bb%bd%e6%95%b0%e6%8d%ae%e5%ba%93%e9%95%9c%e5%83%8f%e5%a4%87%e7%94%a8%e7%ab%99%e7%82%b9 aria-label=还原Bitwarden的备份数据库、镜像备用站点>还原Bitwarden的备份数据库、镜像备用站点</a></li><li><a href=#nginx%e9%85%8d%e7%bd%ae%e5%b8%a6ssl%e8%af%81%e4%b9%a6%e7%9a%84%e7%ab%99%e7%82%b9%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%a4%ba%e8%8c%83 aria-label=nginx配置带SSL证书的站点配置文件示范>nginx配置带SSL证书的站点配置文件示范</a></li><li><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af%e4%bd%bf%e7%94%a8 aria-label=客户端使用>客户端使用</a><ul><li><a href=#desktop aria-label=Desktop>Desktop</a></li><li><a href=#web-browser aria-label="Web Browser">Web Browser</a></li><li><a href=#mobile aria-label=Mobile>Mobile</a></li></ul></li></ul></div></details></div><div class=post-content><p>bitwarden_rs是一个免费开源、能自己搭建服务端的安全密码库服务器</p><ul><li><a href=https://bitwarden.com/>https://bitwarden.com/</a></li><li><a href=https://github.com/dani-garcia/bitwarden_rs>https://github.com/dani-garcia/bitwarden_rs</a></li><li><a href=https://hub.docker.com/r/bitwardenrs/server>https://hub.docker.com/r/bitwardenrs/server</a></li></ul><h2 id=docker安装>Docker安装<a hidden class=anchor aria-hidden=true href=#docker安装>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget -qO- get.docker.com <span class=p>|</span> bash
</span></span></code></pre></div><p>安装Docker Compose</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-<span class=sb>`</span>uname -s<span class=sb>`</span>-<span class=sb>`</span>uname -m<span class=sb>`</span> &gt; ./docker-compose
</span></span><span class=line><span class=cl>mv ./docker-compose /usr/bin/docker-compose
</span></span><span class=line><span class=cl>chmod +x /usr/bin/docker-compose
</span></span></code></pre></div><p>Docker进程管理</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> docker
</span></span><span class=line><span class=cl>systemctl start docker
</span></span><span class=line><span class=cl>systemctl status docker
</span></span></code></pre></div><h2 id=部署-bitwarden>部署 Bitwarden<a hidden class=anchor aria-hidden=true href=#部署-bitwarden>#</a></h2><blockquote><p><a href=https://github.com/dani-garcia/bitwarden_rs>https://github.com/dani-garcia/bitwarden_rs</a></p></blockquote><p>&lsquo;bitwarden_rs&rsquo;的docker镜像<del>bitwardenrs/server</del>现已变更为<strong>vaultwarden/server</strong></p><p>为了安全，可通过docker并创建一个临时容器，Generate an Argon2id PHC string using the &lsquo;bitwarden&rsquo; preset。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run --rm -it vaultwarden/server /vaultwarden <span class=nb>hash</span>
</span></span></code></pre></div><p>得到用bitwarden生成的<code>ADMIN_TOKEN</code>值。类似如下值</p><pre tabindex=0><code>ADMIN_TOKEN=&#39;$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwo02kukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274&#39;
</code></pre><p>复制替换掉<code>ADMIN_TOKEN值</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -d --name bitwarden --restart<span class=o>=</span>always -v /bw-data/:/data/ -p 45729:80 -e <span class=nv>SIGNUPS_ALLOWED</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>INVITATIONS_ALLOWED</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>ADMIN_TOKEN</span><span class=o>=</span><span class=sb>`</span>ADMIN_TOKEN值<span class=sb>`</span> vaultwarden/server:latest
</span></span></code></pre></div><p>以下参数可自定义按需修改：</p><ul><li><code>SIGNUP_ALLOWED</code>值是否允许注册</li><li><code>INVITATIONS_ALLOWED</code>值是否允许组织邀请注册</li><li><code>youpassword</code>用户管理界面 (/admin)的密码</li><li><code>/bw-data/</code>宿主机映射目录</li><li>将宿主机的<code>45729</code>映射到容器的80端口上</li><li><code>--restart=always</code>自动启动bitwarden</li><li><code>-e SHOW_PASSWORD_HINT=false</code>禁用密码提示</li></ul><p>禁用日志添加<code>-e LOG_LEVEL=off</code>、 <code>-e USE_SYSLOG=false</code> 、<code>-e EXTENDED_LOGGING=false</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -d --name bitwarden --restart<span class=o>=</span>always -e <span class=nv>LOG_LEVEL</span><span class=o>=</span>off -e <span class=nv>USE_SYSLOG</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>EXTENDED_LOGGING</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>TZ</span><span class=o>=</span>Asia/Shanghai -e <span class=nv>SHOW_PASSWORD_HINT</span><span class=o>=</span><span class=nb>false</span> -v /bw-data/:/data/ -p 45729:80 -e <span class=nv>SIGNUPS_ALLOWED</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>INVITATIONS_ALLOWED</span><span class=o>=</span><span class=nb>false</span> -e <span class=nv>ADMIN_TOKEN</span><span class=o>=</span><span class=s1>&#39;$argon2id$v=19$m=65540,t=3,p=4$iK/BPqYwoMPsukcDLJH+oUV1OSGkI0NRSgpGJam3Y6A$PTk/xhEI0bWQk8mWwk8HWdOQMwOipBAtMSEU8CAt274&#39;</span> vaultwarden/server:latest
</span></span></code></pre></div><h2 id=bitwarden容器操作命令>bitwarden容器操作命令<a hidden class=anchor aria-hidden=true href=#bitwarden容器操作命令>#</a></h2><p>启动容器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker start bitwarden
</span></span></code></pre></div><p>停止容器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker stop bitwarden
</span></span></code></pre></div><p>删除容器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker rm bitwarden
</span></span></code></pre></div><h2 id=升级-bitwarden-镜像>升级 Bitwarden 镜像<a hidden class=anchor aria-hidden=true href=#升级-bitwarden-镜像>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker stop bitwarden
</span></span><span class=line><span class=cl>docker pull vaultwarden/server:latest
</span></span><span class=line><span class=cl>docker start bitwarden
</span></span></code></pre></div><h2 id=备份bitwarden>备份Bitwarden<a hidden class=anchor aria-hidden=true href=#备份bitwarden>#</a></h2><p>以下为必须要备份的</p><ul><li><code>/bw-data/db.sqlite3</code>是Bitwarden的数据库文件</li><li><code>/bw-data/sends/*</code>目录下的所有附件是不加密的</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker restart bitwarden
</span></span><span class=line><span class=cl><span class=c1># 手动检查文件更新</span>
</span></span><span class=line><span class=cl><span class=c1># ls -l /bw-data/db.sqlite3</span>
</span></span><span class=line><span class=cl><span class=c1># rclone ls rclonename:bitwarden/db.sqlite3</span>
</span></span><span class=line><span class=cl>rclone sync /bw-data/db.sqlite3 rclonename:bitwarden --update
</span></span><span class=line><span class=cl><span class=c1>#rclone sync /bw-data/db.sqlite3 rclonename:bitwarden --ignore-times --size-only</span>
</span></span></code></pre></div><p>其它的都可以不备份(可选)，例如<code>/bw-data/config.json</code>管理面板参数，把下面的内容保存为<code>bitwarden_backup.sh</code></p><p><code>/bw-data/db.sqlite3</code>是Bitwarden 数据库文件 <code>/root/bitwarden/db.sqlite3</code>是本地复制过来的，用于上传到github或通过rclone上传，判断比对MD5值，只有当有更新才上传。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># 重新启动 Bitwarden Docker 容器</span>
</span></span><span class=line><span class=cl>docker restart bitwarden
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 等待 Bitwarden 容器启动完成</span>
</span></span><span class=line><span class=cl>sleep <span class=m>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取 Bitwarden 数据库文件的 MD5 值</span>
</span></span><span class=line><span class=cl><span class=nv>db_md5_before</span><span class=o>=</span><span class=k>$(</span>md5sum /bw-data/db.sqlite3 <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 再次获取 Bitwarden 数据库文件的 MD5 值</span>
</span></span><span class=line><span class=cl><span class=nv>db_md5_after</span><span class=o>=</span><span class=k>$(</span>md5sum /root/bitwarden/db.sqlite3 <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 如果 MD5 值没有变化，则结束脚本</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$db_md5_before</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=s2>&#34;</span><span class=nv>$db_md5_after</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Bitwarden 数据库没有更新，脚本退出。&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># </span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /root/bitwarden/
</span></span><span class=line><span class=cl>rm /root/bitwarden/db.sqlite3
</span></span><span class=line><span class=cl>cp -f /bw-data/db.sqlite3 /root/bitwarden
</span></span><span class=line><span class=cl><span class=c1># 把备份压缩包文件通过github私有仓库</span>
</span></span><span class=line><span class=cl>git add --all
</span></span><span class=line><span class=cl><span class=c1># 指定时间格式</span>
</span></span><span class=line><span class=cl><span class=nv>DATE</span><span class=o>=</span><span class=k>$(</span><span class=nv>TZ</span><span class=o>=</span>Asia/Shanghai date +%Y-%m-%d_%H:%M:%S<span class=k>)</span>
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;</span><span class=nv>$DATE</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>git push
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;github push推送更新成功。&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 下面是网盘备份</span>
</span></span><span class=line><span class=cl><span class=c1># 把db.sqlite3加密压缩</span>
</span></span><span class=line><span class=cl><span class=c1># 指定时间格式</span>
</span></span><span class=line><span class=cl><span class=nv>DATE</span><span class=o>=</span><span class=k>$(</span><span class=nv>TZ</span><span class=o>=</span>Asia/Shanghai date +%Y%m%d%H%M%S<span class=k>)</span>
</span></span><span class=line><span class=cl>zip -P yourpassword  -r /bw-data/tmp/bw-<span class=nv>$DATE</span>.zip /bw-data/db.sqlite3 /bw-data/sends
</span></span><span class=line><span class=cl><span class=c1># 把备份压缩包文件通过rclone上传到网盘</span>
</span></span><span class=line><span class=cl>rclone copy /bw-data/tmp/*.zip rclonename:bitwarden
</span></span><span class=line><span class=cl><span class=c1># 删除15天前的备份文件</span>
</span></span><span class=line><span class=cl>rclone delete rclonename:bitwarden --min-age 15d
</span></span><span class=line><span class=cl><span class=c1># 删除压缩包文件</span>
</span></span><span class=line><span class=cl>rm /bw-data/tmp/*.zip
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;删除压缩包文件&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 提示用户更新完成</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Bitwarden 数据库已经更新完毕。&#34;</span>
</span></span></code></pre></div><p>然后授权</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x bitwarden_backup.sh
</span></span></code></pre></div><p>通过Crontab定时执行计划任务，编辑<code>/etc/crontab</code>文件，添加</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=m>23</span> <span class=m>11</span> * * *  root bash /root/bitwarden_backup.sh
</span></span></code></pre></div><p>然后重启Crontab</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl restart cron.service
</span></span><span class=line><span class=cl>/etc/init.d/cron restart
</span></span></code></pre></div><h2 id=还原bitwarden的备份数据库镜像备用站点>还原Bitwarden的备份数据库、镜像备用站点<a hidden class=anchor aria-hidden=true href=#还原bitwarden的备份数据库镜像备用站点>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rclone sync rclonename:bitwarden/db.sqlite3 /bw-data  --ignore-times --size-only
</span></span><span class=line><span class=cl>docker restart bitwarden
</span></span></code></pre></div><p>解压、替换掉原来的文件即可，创建bitwarden_sync.sh文件，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>rm /root/bitwarden/db.sqlite3
</span></span><span class=line><span class=cl><span class=c1># 例如从github恢复</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /root/bitwarden <span class=o>&amp;&amp;</span> git pull
</span></span><span class=line><span class=cl><span class=c1># 或者从rclone恢复，二选一即可</span>
</span></span><span class=line><span class=cl>rclone copy rclonename:bitwarden/db.sqlite3  /root/bitwarden
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 获取 Bitwarden 数据库文件的 MD5 值</span>
</span></span><span class=line><span class=cl><span class=nv>db_md5_before</span><span class=o>=</span><span class=k>$(</span>md5sum /root/bitwarden/db.sqlite3 <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 再次获取 Bitwarden 数据库文件的 MD5 值</span>
</span></span><span class=line><span class=cl><span class=nv>db_md5_after</span><span class=o>=</span><span class=k>$(</span>md5sum /bw-data/db.sqlite3 <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 如果 MD5 值没有变化，则结束脚本</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$db_md5_before</span><span class=s2>&#34;</span> <span class=o>==</span> <span class=s2>&#34;</span><span class=nv>$db_md5_after</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Bitwarden 数据库没有更新，脚本退出。&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rm /bw-data/db.sqlite3 /bw-data/db.sqlite3-shm /bw-data/db.sqlite3-wal
</span></span><span class=line><span class=cl>cp /root/bitwarden/db.sqlite3 /bw-data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重新启动 Bitwarden Docker 容器</span>
</span></span><span class=line><span class=cl>docker restart bitwarden
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 等待 Bitwarden 容器启动完成</span>
</span></span><span class=line><span class=cl>sleep <span class=m>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 提示用户更新完成</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Bitwarden 数据库已经更新完毕。&#34;</span>
</span></span></code></pre></div><h2 id=nginx配置带ssl证书的站点配置文件示范>nginx配置带SSL证书的站点配置文件示范<a hidden class=anchor aria-hidden=true href=#nginx配置带ssl证书的站点配置文件示范>#</a></h2><p>编辑<code>/etc/nginx/sites-available/example.com</code>站点配置文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>server <span class=o>{</span>
</span></span><span class=line><span class=cl>  listen <span class=m>443</span> ssl http2<span class=p>;</span>
</span></span><span class=line><span class=cl>  listen <span class=o>[</span>::<span class=o>]</span>:443 ssl http2<span class=p>;</span>
</span></span><span class=line><span class=cl>  server_name example.com<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1># root /var/www/example.com;</span>
</span></span><span class=line><span class=cl>  <span class=c1># index index.html index.htm index.php;</span>
</span></span><span class=line><span class=cl>  location / <span class=o>{</span>
</span></span><span class=line><span class=cl>  proxy_pass http://127.0.0.1:45729<span class=p>;</span>
</span></span><span class=line><span class=cl>  proxy_redirect off<span class=p>;</span>
</span></span><span class=line><span class=cl>  proxy_set_header X-Real-IP <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  proxy_set_header X-Forwarded-For <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  ssl on<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_certificate      /etc/letsencrypt/live/example.com/fullchain.pem<span class=p>;</span>
</span></span><span class=line><span class=cl>  ssl_certificate_key  /etc/letsencrypt/live/example.com/privkey.pem<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=客户端使用>客户端使用<a hidden class=anchor aria-hidden=true href=#客户端使用>#</a></h2><blockquote><p><a href=https://bitwarden.com/download/>https://bitwarden.com/download/</a></p></blockquote><h3 id=desktop>Desktop<a hidden class=anchor aria-hidden=true href=#desktop>#</a></h3><ol><li><a href="https://vault.bitwarden.com/download/?app=desktop&amp;platform=windows">Windows</a></li></ol><p>Support for Windows 7, 8, and 10</p><ol start=2><li><p><a href="https://vault.bitwarden.com/download/?app=desktop&amp;platform=macos">macOS</a>
Support for macOS Yosemite and later</p></li><li><p><a href="https://vault.bitwarden.com/download/?app=desktop&amp;platform=linux">Linux</a></p></li></ol><p>Support for most distributions</p><h3 id=web-browser>Web Browser<a hidden class=anchor aria-hidden=true href=#web-browser>#</a></h3><ol><li><a href=https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb>Google Chrome</a></li><li><a href=https://addons.mozilla.org/firefox/addon/bitwarden-password-manager>Mozilla Firefox</a></li><li><a href=https://addons.opera.com/extensions/details/bitwarden-free-password-manager/>Opera</a></li><li><a href=https://microsoftedge.microsoft.com/addons/detail/jbkfoedolllekgbhcbcoahefnbanhhlh>Microsoft Edge</a></li><li><a href="https://vault.bitwarden.com/download/?app=desktop&amp;platform=macos">Safari</a></li><li><a href=https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb>Vivaldi</a></li><li><a href=https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb>Brave</a></li><li><a href=https://addons.mozilla.org/firefox/addon/bitwarden-password-manager/>Tor Browser</a></li></ol><h3 id=mobile>Mobile<a hidden class=anchor aria-hidden=true href=#mobile>#</a></h3><ol><li><a href="https://itunes.apple.com/app/bitwarden-free-password-manager/id1137397744?mt=8">App Store</a></li><li><a href="https://play.google.com/store/apps/details?id=com.x8bit.bitwarden">Google Play</a></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://567899.xyz/tags/bitwarden/>Bitwarden</a></li></ul><nav class=paginav><a class=prev href=https://567899.xyz/post/linux-vps-rclone-googledrive-microsoftonedrive/><span class=title>« 上一页</span><br><span>在Linux_VPS上使用rclone挂载GoogleDrive云端硬盘和MicrosoftOneDrive</span>
</a><a class=next href=https://567899.xyz/post/nginx-caddy-proxy-google-youtube-wikipedia/><span class=title>下一页 »</span><br><span>利用Caddy,Nginx反向代理谷歌YouTube等网站</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on x" href="https://x.com/intent/tweet/?text=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8&amp;url=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f&amp;hashtags=Bitwarden"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f&amp;title=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8&amp;summary=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8&amp;source=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f&title=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8%20-%20https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on telegram" href="https://telegram.me/share/url?text=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8&amp;url=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 使用bitwarden_rs搭建安全密码库服务器 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%bd%bf%e7%94%a8bitwarden_rs%e6%90%ad%e5%bb%ba%e5%ae%89%e5%85%a8%e5%af%86%e7%a0%81%e5%ba%93%e6%9c%8d%e5%8a%a1%e5%99%a8&u=https%3a%2f%2f567899.xyz%2fpost%2fbitwarden%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline></div><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';
    const locale = {
        nick: '昵称(必填)',
        nickError: '请填写昵称',
        mail: '邮箱',
        mailError: '请填写正确的邮件地址',
        link: '网址',
        optional: '可选',
        placeholder: '说点什么吧...\n填写邮箱可收到回复提醒。\n评论区支持 Markdown 语法及预览。\n',
        sofa: '来发评论吧~',
        submit: '提交',
        like: '喜欢',
        cancelLike: '取消喜欢',
        reply: '回复',
        cancelReply: '取消回复',
        comment: '评论',
        refresh: '刷新',
        more: '加载更多...',
        preview: '预览',
        emoji: '表情',
        uploadImage: '上传图片',
        seconds: '秒前',
        minutes: '分钟前',
        hours: '小时前',
        days: '天前',
        now: '刚刚',
        uploading: '正在上传',
        login: '登录',
        logout: '退出',
        admin: '博主',
        sticky: '置顶',
        word: '字',
        wordHint: '评论字数应在 $0 到 $1 字之间！\n当前字数：$2',
        anonymous: '匿名',
        level0: '潜水',
        level1: '冒泡',
        level2: '吐槽',
        level3: '活跃',
        level4: '话痨',
        level5: '传说',
        gif: '表情包',
        gifSearchPlaceholder: '搜索表情包',
        profile: '个人资料',
        approved: '通过',
        waiting: '待审核',
        spam: '垃圾',
        unsticky: '取消置顶',
        oldest: '按倒序',
        latest: '按正序',
        hottest: '按热度',
        reactionTitle: '你认为这篇文章怎么样？',
    };
    init({
        
        el: '#waline',
        serverURL: 'https://comments.567899.xyz',
        locale,
        emoji: true,     
        search: true,    
        reaction: false,  
        requiredMeta: ['nick'],
        pageSize: 10,
        imageUploader: true,
        copyright: true,
        pageview: true,
        like: true,
    });
</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://567899.xyz/>Xizi's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>